<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personalized Timetable Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #6868b7;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 50px;
            border-radius: 8px;
            overflow-x: auto;
        }
        .title {
            font-size: 2em;
            text-align: center;
            margin: 20px 0;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }
        .form-group input[type="text"],
        .form-group input[type="number"] {
            width: 100% ;
            max-width: 400px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
        }
        .form-group button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
        }
        .form-group button:hover {
            background-color: #0056b3;
        }

        .timetable-wrapper{
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }


        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            /* overflow-x: auto; */
            display: block;
        }
        th, td {
            border: 1px solid #ddd;
            text-align: center;
            padding: 12px;
        }
        th {
            background-color: #f2f2f2;
            font-weight: 700;
        }


        @media (max-width: 768px) {
            .title {
                font-size: 1.5em; /* Adjust title font size for mobile */
            }
            .form-group input[type="text"],
            .form-group input[type="number"] {
                max-width: 100%; /* Ensure inputs use full width on mobile */
            }
        }






        /* .download-link {
            display: block;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            color: #000000;
            text-decoration: none;
            font-weight: 500;
        } */
        /* .download-link:hover {
            text-decoration: underline;
        } */
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>

<div class="container">
    <div class="title">Customized Time Table</div>

    <div class="form-group">
        <label for="numCourses">Number of Courses:</label>
        <input type="number" id="numCourses" min="1" required>
        <button id="generateFieldsButton" onclick="generateInputFields()">Generate Fields</button>
    </div>

    <div id="courseFields"></div>

    <div class="form-group">
        <button onclick="generateTimetable()">Generate Timetable</button>
    </div>

    <div id="timetableContainer" class="timetable-wrapper"></div>

    <!-- Datalist for course suggestions -->
    <datalist id="courseSuggestions"></datalist>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
   const allCourses = [
        'Blockchain and Web3 Development', 
        'Data Analytics I', 
        'Earthquake Resistant Design of Masonry Structures', 
        'Probability and Random Processes', 
        'Thinking and Knowing in the Human Sciences – III', 
        'CMOS References and Regulators',
        'Introduction to Biology', 
        'Introduction to Quantum Field Theory', 
        'Operating Systems and Networks (OSN)', 
        'Signal Processing', 
        'Structural Dynamics', 
        'Topics in Nanosciences', 
        'Retrofit of Existing Infrastructure(H2)', 
        'Software Systems Development',
        'Advanced Computer Architecture', 
        'Behavioral Research & Experimental Design', 
        'Digital Image Processing', 
        'Distributed Systems', 
        'Environmental Science & Technology', 
        'Language and Society', 
        'Theory of Elasticity', 
        'Science 1', 
        'Quantum Mechanics', 
        'Hydrological Modelling and Software Development',
        'Learning and Memory', 
        'Structural Engineering Design Studio', 
        'Topics in Applied Optimization', 
        'Quantum Information Theory', 
        'Open Quantum Systems and Quantum Thermodynamics',
        'Advanced Computer Networks', 
        'Automata Theory (H1)', 
        'Bioinformatics (H1)', 
        'Data and Applications (H2)', 
        'Information Theory', 
        'Introduction to Remote Sensing', 
        'MCS 1 - Probability and Statistics (H1)', 
        'MCS 2 - Linear Algebra (H2)', 
        'Structural Safety of Built Infrastructure', 
        'Systems Biology (H2)', 
        'Principles of Semiconductor Devices', 
        'Information Retrieval & Extraction', 
        'Wireless Communications',
        'Introduction to Economics', 
        'Introduction to Film Studies', 
        'Intro to Psychology',
        'Advanced Operating Systems', 
        'Chemistry Topics for Engineers', 
        'Computer Problem Solving', 
        'Physics of Early Universe', 
        'Software Quality Engineering',
        'Advanced Design of Steel Structures', 
        'Algorithm Analysis and Design', 
        'Chemical Kinetics and Reaction Dynamics (H2)', 
        'Computational Linguistics II', 
        'Design for Testability', 
        'Fairness, Privacy and Ethics in AI', 
        'Foundations for Signal Processing and Communication', 
        'Modern Complexity Theory', 
        'Spectroscopy(H1)', 
        'Spatial Informatics',
        'Applied Ethics', 
        'Biomolecular Structure Interaction & Dynamics', 
        'Data Structures & Algorithms for Problem Solving', 
        'Entropy and Information', 
        'Finite Element Methods', 
        'Thinking and Knowing in the Human Sciences – II', 
        'Geospatial Technology for Disaster Risk Modelling',
        'Algorithms and Operating Systems', 
        'IoT Workshop', 
        'Intro to Cognitive Science', 
        'Introduction to Neural and Cognitive Modeling', 
        'Mobile Robotics', 
        'Research in Information Security', 
        'Signal Detection and Estimation Theory', 
        'Systems Thinking', 
        'Design for Social Innovation', 
        'Speech Analysis and Linguistics',
        'Basics of Ethics (H1)', 
        'Gender and Society', 
        'Introduction to Philosophy', 
        'Music Workshop', 
        'Introduction to Politics', 
        'CASE Seminar', 
        'Human Computer Interaction (H2)',
        'Statistical Methods in AI (SMAI)',
        'Basics of Ethics (H2)', 
        'Introduction to History', 
        'Work, Entrepreneurship and Technology in Contemporary Societies', 
        'Readings from Hindi Literature', 
        'Design Thinking - Research to Define (H1)', 
        'Design Thinking - Idea to Evaluate (H2)',
        'Advanced NLP', 
        'Digital VLSI Design', 
        'Modern Coding Theory', 
        'Probability and Statistics', 
        'VLSI Design', 
        'Principles of Programming Languages', 
        'Robotics: Dynamics and Control', 
        'Product Management 101 (H1)', 
        'User Research Methods (H2)', 
        'Product Marketing'
    ];


    const timetableHTML = `
    <div class="title">Lecture timetable for the courses of Monsoon 2024</div>
    <table>
        <thead>
            <tr>
                <th></th>
                <th>8:30-9:55AM</th>
                <th>10:05-11:30AM</th>
                <th>11:40-1:05PM</th>
                <th>2:00-3:25PM</th>
                <th>3:35-5:00PM</th>
                <th>5:10-6:40PM</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>Mon</th>
            <td>Blockchain and Web3 Development <b>H101</b>, Data Analytics I <b>H205</b>, Earthquake Resistant Design of Masonry Structures <b>H102</b>, Probability and Random Processes <b>H103</b>, Thinking and Knowing in the Human Sciences III <b>H201</b>, CMOS References and Regulators <b>H202</b> </td>
            <td>Introduction to Biology, Introduction to Quantum Field Theory, Operating Systems and Networks (OSN), Signal Processing, Structural Dynamics, Topics in Nanosciences, Retrofit of Existing Infrastructure(H2), Software Systems Development</td>
            <td>Advanced Computer Architecture, Behavioral Research & Experimental Design, Digital Image Processing, Distributed Systems, Environmental Science & Technology, Language and Society, Theory of Elasticity, Science 1, Quantum Mechanics, Hydrological modelling and Software Development</td>
            <td>Learning and Memory, Structural Engineering Design Studio, Topics in Applied Optimization, Quantum Information Theory, Open Quantum Systems and Quantum Thermodynamics</td>
            <td>Advanced Computer Networks, Automata Theory (H1), Bioinformatics (H1), Data and Applications (H2), Information Theory, Introduction to Remote Sensing MCS 1-Probability and Statistics (H1), MCS 2 - Linear Algebra (H2), Structural Safety of Built Infrastructure, Systems Biology (H2), Principles of Semiconductor Devices, Information Retrieval & Extraction, Wireless Communications</td>
            <td>Introduction to Economics, Introduction to Film Studies, Intro to Psychology</td>
        </tr>
        <tr>
            <th>Tue</th>
            <td>Advanced Operating Systems, Chemistry Topics for Engineers, Computer Problem Solving, Physics of Early Universe, Software Quality Engineering</td>
            <td>Advanced Design of Steel Structures, Algorithm Analysis and Design, Chemical Kinetics and Reaction Dynamics (H2), Computational Linguistics II, Design for Testability, Fairness, Privacy and Ethics in AI, Foundations for Signal Processing and Communication, Modern Complexity Theory, Spectroscopy(H1), Spatial Informatics</td>
            <td>Applied Ethics, Biomolecular Structure Interaction & Dynamics, Data Structures & Algorithms for Problem Solving, Entropy and Information, Finite Element Methods, Thinking and Knowing in the Human Sciences – II, Geospatial Technology for Disaster Risk Modelling</td>
            <td>Algorithms and Operating Systems, IoT Workshop, Intro to Cognitive Science, Introduction to Neural and Cognitive Modeling, Mobile Robotics, Signal Detection and Estimation Theory, Systems Thinking, Design for Social Innovation, Speech Analysis and Linguistics</td>
            <td>Basics of Ethics (H1), Gender and Society, Introduction to Philosophy, Research in Information Security, Music Workshop, Introduction to Politics</td>
            <td>Statistical Methods in AI (SMAI) </td>
        </tr>
        <tr>
            <th>Wed</th>
            <td>Basics of Ethics (H2), Introduction to History, Work, Entrepreneurship and Technology in Contemporary Societies, Readings from Hindi Literature, Design Thinking - Research to Define (H1), Design Thinking - Idea to Evaluate (H2)</td>
            <td>Advanced NLP, Digital VLSI Design, Modern Coding Theory, Probability and Statistics, VLSI Design, Principles of Programming Languages, Robotics: Dynamics and Control, Product Management 101 (H1), User Research Methods (H2), Product Marketing</td>
            <td>Human Computer Interaction (H2)</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th>Thu</th>
            <td>Blockchain and Web3 Development, Data Analytics I, Earthquake Resistant Design of Masonry Structures, Probability and Random Processes, Thinking and Knowing in the Human Sciences – III, CMOS References and Regulators</td>
            <td>Introduction to Biology, Introduction to Quantum Field Theory, Operating Systems and Networks (OSN), Signal Processing, Structural Dynamics, Topics in Nanosciences, Retrofit of Existing Infrastructure(H2), Software Systems Development</td>
            <td>Advanced Computer Architecture, Behavioral Research & Experimental Design, Digital Image Processing, Distributed Systems, Environmental Science & Technology, Language and Society, Theory of Elasticity, Science 1, Quantum Mechanics, Hydrological modelling and Software Development</td>
            <td>Learning and Memory, Structural Engineering Design Studio, Topics in Applied Optimization, Quantum Information Theory, Open Quantum Systems and Quantum Thermodynamics</td>
            <td>Advanced Computer Networks, Automata Theory (H1), Bioinformatics (H1), Data and Applications (H2), Information Theory, Introduction to Remote Sensing MCS 1-Probability and Statistics (H1), MCS 2 - Linear Algebra (H2), Structural Safety of Built Infrastructure, Systems Biology (H2), Principles of Semiconductor Devices, Information Retrieval & Extraction, Wireless Communications</td>
            <td>Introduction to Economics, Introduction to Film Studies, Intro to Psychology</td>
        </tr>
        <tr>
            <th>Fri</th>
            <td>Advanced Operating Systems, Chemistry Topics for Engineers, Computer Problem Solving, Physics of Early Universe, Software Quality Engineering</td>
            <td>Advanced Design of Steel Structures, Algorithm Analysis and Design, Chemical Kinetics and Reaction Dynamics (H2), Computational Linguistics II, Design for Testability, Fairness, Privacy and Ethics in AI, Foundations for Signal Processing and Communication, Modern Complexity Theory, Spectroscopy(H1), Spatial Informatics</td>
            <td>Applied Ethics, Biomolecular Structure Interaction & Dynamics, Data Structures & Algorithms for Problem Solving, Entropy and Information, Finite Element Methods, Thinking and Knowing in the Human Sciences – II, Geospatial Technology for Disaster Risk Modelling</td>
            <td>Algorithms and Operating Systems, IoT Workshop, Intro to Cognitive Science, Introduction to Neural and Cognitive Modeling, Mobile Robotics, Research in Information Security, Signal Detection and Estimation Theory, Systems Thinking, Design for Social Innovation, Speech Analysis and Linguistics</td>
            <td>Basics of Ethics (H1), Gender and Society, Introduction to Philosophy, Research in Information Security, Music Workshop, Introduction to Politics, CASE Seminar</td>
            <td>Statistical Methods in AI (SMAI)</td>
        </tr>
        <tr>
            <th>Sat</th>
            <td>Basics of Ethics (H2), Introduction to History, Work, Entrepreneurship and Technology in Contemporary Societies, Readings from Hindi Literature, Design Thinking - Research to Define (H1), Design Thinking - Idea to Evaluate (H2)</td>
            <td>Advanced NLP, Digital VLSI Design, Modern Coding Theory, Probability and Statistics, VLSI Design, Principles of Programming Languages, Robotics: Dynamics and Control, Product Management 101 (H1), User Research Methods (H2), Product Marketing</td>
            <td>Human Computer Interaction (H2)</td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>
    
    `;

    function generateInputFields() {
        const numCourses = document.getElementById('numCourses').value;
        const courseFields = document.getElementById('courseFields');
        courseFields.innerHTML = '';

        for (let i = 0; i < numCourses; i++) {
            const fieldGroup = document.createElement('div');
            fieldGroup.classList.add('form-group');

            const label = document.createElement('label');
            label.textContent = `Course ${i + 1}:`;
            fieldGroup.appendChild(label);

            const input = document.createElement('input');
            input.type = 'text';
            input.classList.add('courseInput');
            input.setAttribute('list', 'courseSuggestions');
            input.addEventListener('input', showSuggestions);
            fieldGroup.appendChild(input);

            courseFields.appendChild(fieldGroup);
        }
    }

    function showSuggestions(event) {
    const input = event.target;
    const value = input.value.toLowerCase();
    const suggestions = document.getElementById('courseSuggestions');

    suggestions.innerHTML = '';
    input.setCustomValidity(''); // Clear previous custom validation messages

    if (value) {
        const filteredCourses = allCourses.filter(course => 
            course.toLowerCase().includes(value)
        );

        if (filteredCourses.length > 0) {
            filteredCourses.forEach(course => {
                const option = document.createElement('option');
                option.value = course;
                suggestions.appendChild(option);
            });
        } else {
            // Set a custom validation message if no matches are found
            input.setCustomValidity('Course not Found');
        }
    }
    input.reportValidity(); // Trigger the custom validity message if any
}




function hasInvalidCourses() {
    const courseInputs = document.querySelectorAll('.courseInput');
    let hasInvalid = false;

    courseInputs.forEach(input => {
        if (input.validationMessage) { // Check if there's a custom validation message
            hasInvalid = true;
        }
    });

    return hasInvalid;
}








    function generateTimetable() {

     

        if (hasInvalidCourses()) {
        alert('Please correct all "Course not Found" errors before generating the timetable.');
        return; // Stop execution if there are invalid inputs
    }

    
    const courseInputs = document.querySelectorAll('.courseInput');
    const courses = Array.from(courseInputs).map(input => input.value.trim());

    // Escape specific course name to use in regex
    const specificCourseName = 'Work, Entrepreneurship and Technology in Contemporary Societies';
    const placeholder = 'Work|Entrepreneurship and Technology in Contemporary Societies';

    let filteredTimetable = timetableHTML;
    const parser = new DOMParser();
    const dom = parser.parseFromString(filteredTimetable, 'text/html');
    const rows = dom.querySelectorAll('tbody tr');

    rows.forEach(row => {
        const cells = row.querySelectorAll('td');
        cells.forEach(cell => {
            if (cell.textContent.trim()) {
                // Replace the specific course name with a placeholder
                let cellContent = cell.textContent.replace(
                    new RegExp(specificCourseName, 'g'),
                    placeholder
                );

                // Split the cell content by commas
                const cellCourses = cellContent.split(',').map(course => course.trim());

                // Filter courses to match user input
                const matchingCourses = cellCourses.filter(course => courses.some(userCourse => {
                    // Restore the original comma in the specific course name
                    const restoredCourse = course.replace(placeholder, specificCourseName);
                    return userCourse === restoredCourse;
                }));

                // Join the matching courses and replace placeholder back to original
                cell.textContent = matchingCourses.join(', ').replace(
                    new RegExp(placeholder, 'g'),
                    specificCourseName
                );
            }
        });
    });

    const timetableContainer = document.getElementById('timetableContainer');
    timetableContainer.innerHTML = dom.body.innerHTML;
}


  
// Add event listener to trigger the generateInputFields function on Enter key press
document.getElementById('numCourses').addEventListener('keypress', function (event) {
    if (event.key === 'Enter') { // Check if the Enter key is pressed
        event.preventDefault(); // Prevent default form submission
        document.getElementById('generateFieldsButton').click(); // Programmatically click the button
    }
});

    
</script>
</body>
</html>


